"use strict";var Koa=require("koa"),path=require("path"),koaStatic=require("koa-static"),router=require("./routers/router"),bodyParser=require("koa-bodyparser"),cors=require("koa2-cors"),https=require("https"),fs=require("fs"),sslify=require("koa-sslify").default,_require=require("./services/db"),getData=_require.getData,deleteAllTable=_require.deleteAllTable,_require2=require("./controllers/articles-handler"),updateBlog=_require2.updateBlog,getBlogs=_require2.getBlogs,getBlogByPage=_require2.getBlogByPage,_isSSL=!1,app=new Koa;if(deleteAllTable(),updateBlog(),app.use(cors({origin:function(){return"*"},exposeHeaders:["WWW-Authenticate","Server-Authorization"],maxAge:5,credentials:!0,allowMethods:["GET","POST","DELETE"],allowHeaders:["Content-Type","Authorization","Accept"]})),app.use(bodyParser()),app.use(router.routes()).use(router.allowedMethods()),app.use(koaStatic(path.join(__dirname,"../dist"))),app.use(function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:"/index"!==r.url&&(r.response.type="html",r.response.body=fs.createReadStream("./dist/index.html"));case 1:case"end":return e.stop()}})}),_isSSL){app.use(sslify());var options={key:fs.readFileSync(path.join(__dirname,"../ssl/ssl.key")),cert:fs.readFileSync(path.join(__dirname,"../ssl/ssl.crt"))};https.createServer(options,app.callback()).listen(443,function(){console.log("Server is running at 443 port with SSL")})}else app.listen(80,function(){console.log("Server is running at 80 port")});
//# sourceMappingURL=app.min.js.map
